# Hash Table

ハッシュテーブル（またはハッシュマップ）は、キーと値のペアを格納するためのデータ構造です。これは非常に効率的なデータ構造であり、一般的には挿入、検索、削除などの操作を平均的に O(1)の時間複雑度で実行することができます。

ハッシュテーブルは、多くのプログラミング言語で基本的なデータ構造として提供されており、非常に汎用性が高く効率的なデータ構造です。

## 主な特徴と機能

1. **キーによるアクセス**:
   各要素（値）は、一意のキーに関連付けられています。キーを使用して値を迅速に検索、挿入、または削除することができます。
2. **ハッシュ関数**:
   ハッシュテーブルは、キーをハッシュ関数に入力し、配列内のインデックス（ハッシュ値）に変換します。このインデックスは、値が格納される場所を決定します。
3. **衝突の処理**:
   異なるキーが同じハッシュ値にマッピングされる場合（衝突と呼ばれます）、ハッシュテーブルはこれを処理するためにいくつかの方法（チェイン法、オープンアドレッシング法など）を使用します。
4. **動的なサイズ調整**:
   ハッシュテーブルは通常、要素の数が増加するにつれて、容量を動的に調整します。これは再ハッシュと呼ばれ、全ての要素を新しい大きな配列に移動し直します。

## 使用例

- **データベースのインデックス**:
  データベースでは、レコードを迅速に検索するためにハッシュテーブルが使われることがあります。
- **キャッシュ**:
  ウェブページや計算結果など、再利用される可能性のあるデータを保存しておくのに便利です。
- **一意な項目の集合**:
  重複を許さない一意な要素の集合として使用できます。

## ハッシュテーブルのハッシュ値生成とアクセスのプロセス

ハッシュテーブルでは、ハッシュ関数がキーをハッシュ値に変換し、そのハッシュ値はデータを格納するためのインデックス（または「バケット」と呼ばれる位置）を決定します。このプロセスを詳しく説明します。

1. **ハッシュ関数の実行**:
   ハッシュテーブルは、提供されたキーに対してハッシュ関数を実行します。この関数は、キーをハッシュ値に変換します。このハッシュ値は、データを格納するための配列（または内部的なデータ構造）内のインデックスを決定するために使用されます。
2. **インデックスへのマッピング**:
   生成されたハッシュ値は通常、ハッシュテーブルのサイズに基づいて調整されます（例えば、モジュロ演算「割算の余りを求めること mod &」を使用）。これにより、ハッシュ値はハッシュテーブルの実際のインデックス範囲にマッピングされます。
3. **データの格納とアクセス**:
   ハッシュテーブル内のこのインデックス位置にデータ（値）が格納されます。キーに対してハッシュ関数を再度実行することで、同じインデックスに直接アクセスし、データを取得することができます。

## ハッシュテーブルのハッシュ値生成とアクセスのプロセスの例

ハッシュテーブルのサイズが 5 で、特定のサンプルデータを使用して値の挿入と検索の流れをステップバイステップで説明します。

サンプルデータとして、キーと値のペアを次のように使用します

- キー: "name", 値: "Alice"
- キー: "age", 値: 30
- キー: "age", 値: 31 // データの上書き

### 初期状態

テーブルは空です。

```
[null, null, null, null, null]
```

### ステップ 1: キー "name" で値 "Alice" を挿入

1. **ハッシュ関数の適用**:
   - キー "name" にハッシュ関数を適用します。
   - 仮に、そのハッシュ値が `4` とします。
2. **値の挿入**:
   - ハッシュテーブルのインデックス 5 に "Alice" を挿入します。
     テーブルの状態:

```
[null, null, null, null, "Alice"]
```

### ステップ 2: キー "age" で値 30 を挿入

1. **ハッシュ関数の適用**:
   - キー "age" にハッシュ関数を適用します。
   - 仮に、そのハッシュ値が `2` とします。
2. **値の挿入**:
   - ハッシュテーブルのインデックス 2 に値 30 を挿入します。
     テーブルの状態:

```
[null, null, 30, null, "Alice"]
```

### ステップ 3: キー "age" で値 31 を挿入（上書き）

1. **ハッシュ関数の適用**:
   - キー "age" に再びハッシュ関数を適用します。
   - ハッシュ値は再び `2` とします。
2. **値の上書き**:
   - ハッシュテーブルのインデックス 2 にある値 30 を 31 に上書きします。
     テーブルの状態:

```
[null, null, 31, null, "Alice"]
```

### **ステップ 4: キー "name" で値を検索**

テーブルの現在の状態は次の通りです

```
[null, null, 31, null, "Alice"]
```

1. **ハッシュ関数の適用**:
   - キー "name" にハッシュ関数を適用します。
   - 仮に、そのハッシュ値が `4` とします。
2. **値の検索**:
   - 計算したハッシュ値に基づいて、ハッシュテーブルの該当するインデックスを参照します。
   - そのインデックスには "Alice" が格納されています。

### まとめ

このプロセスでは、各キーに対してハッシュ関数を使用してハッシュ値（インデックス）を生成し、そのインデックスに対応する場所に値を挿入します。既存のキーに新しい値を挿入する場合、同じインデックスにある古い値は新しい値に上書きされます。このようにして、ハッシュテーブルは効率的にキーと値のペアを管理します。
